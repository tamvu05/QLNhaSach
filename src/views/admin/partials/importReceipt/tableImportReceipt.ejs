<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
    integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<div id="data-attribute"     data-current-page="<%= currentPage %>"     data-total-page="<%= totalPage %>"    
    data-total-item="<%= totalItem %>"     data-total-item-per-page="<%= totalItemPerPage %>"    
    data-page-limit="<%= PAGE_LIMIT %>"></div>

<div class="table-responsive-wrapper">
    <table class="table table-striped table-hover align-middle">
        <thead>
            <tr>
                <th>STT</th>
                <th>Ngày nhập</th>
                <th><i class="sortable" data-sort="TenNCC">Nhà cung cấp</i></th>
                <th>Điện thoại</th>
                <th>Nhân viên lập phiếu</th>
                <th>Trạng thái</th>
                <th class="text-center">Thao tác</th>
            </tr>
        </thead>
        <tbody>

            <% if (importReceipts.length> 0) { %>

                <% importReceipts.forEach((importReceipt, index)=> { %>

                    <tr data-id="<%= importReceipt.MaPN %>">
                        <td>
                            <%= index + 1 %>
                        </td>
                        <td class="text-muted">
                            <%= importReceipt.NgayNhap.toLocaleString('vi-VN', {
                                year: 'numeric',
                                month: '2-digit',
                                day: '2-digit',
                                hour: '2-digit',
                                minute: '2-digit',
                                second: '2-digit',
                                hour12: false // Bật 24 giờ
                            }) %>
                        </td>
                        <td class="text-muted">
                            <%= importReceipt.TenNCC %>
                        </td>
                        <td class="text-muted">
                            <%= importReceipt.SDT %>
                        </td>
                        <td class="text-muted">
                            <%= importReceipt.HoTen %> 
                        </td>
                        <td>
                            <% if (importReceipt.TrangThai === 'HIEU_LUC') { %>
                                <span class="badge bg-success">Có hiệu lực</span>
                            <% } else { %>
                                <span class="badge bg-secondary">Đã hủy</span>
                            <% } %>
                        </td>
                        <td class="action-col text-center">
                            <button class="btn-show-details btn action-btn view-btn" title="Xem chi tiết">
                                <i class="fa-solid fa-eye"></i> 
                            </button>
                            <% if (importReceipt.TrangThai === 'HIEU_LUC') { %>
                                <button class="btn-cancel-receipt btn action-btn delete-btn" title="Hủy phiếu">
                                    <i class="fa-solid fa-ban"></i>
                                </button>
                            <% } else { %>
                                <button class="btn action-btn" disabled title="Phiếu đã hủy">
                                    <i class="fa-solid fa-ban" style="opacity: 0.5;"></i>
                                </button>
                            <% } %>
                        </td>
                    </tr>
                    <% }) %>

                        <% } else { %>

                            <tr class="no-data">
                                <td colspan="7" class="text-center py-4">
                                    Không có dữ liệu...
                                </td>
                            </tr>

                            <% } %>
        </tbody>
    </table>
</div>
